<div class="dashboard-container">
    <mat-card class="toggle-card">
        <div class="year-select">
            <mat-form-field appearance="fill">
                <mat-label>Select Year</mat-label>
                <mat-select [(ngModel)]="selectedYear" (selectionChange)="onViewChange()">
                    <mat-option *ngFor="let year of years" [value]="year">{{ year }}</mat-option>
                </mat-select>
            </mat-form-field>
        </div>
        <div *ngIf="!isYearlyView" class="month-select">
            <mat-form-field appearance="fill">
                <mat-label>Select Month</mat-label>
                <mat-select [(ngModel)]="selectedMonth" (selectionChange)="onViewChange()">
                    <mat-option *ngFor="let month of months" [value]="month">{{ month }}</mat-option>
                </mat-select>
            </mat-form-field>
        </div>
    </mat-card>

    <div class="stats-container">
        <mat-card class="stat-card">
            <h2>Total Income</h2>
            <p class="amount positive">{{ getTotalIncome() | currency }}</p>
        </mat-card>
        <mat-card class="stat-card">
            <h2>Total Expenses</h2>
            <p class="amount negative">{{ getTotalExpenses() | currency }}</p>
        </mat-card>
    </div>

    <div class="charts-container">
        <mat-card class="chart-card">
            <h2>Income vs Expenses</h2>
            <ngx-charts-bar-vertical-2d
                [view]="[700, 400]"
                [results]="barChartData"
                [gradient]="true"
                [xAxis]="true"
                [yAxis]="true"
                [showXAxisLabel]="true"
                [showYAxisLabel]="true"
                xAxisLabel="Period"
                yAxisLabel="Amount ($)"
                [barPadding]="2"
                [groupPadding]="8"
                [roundDomains]="true"
                [scheme]="'cool'"
            >
            </ngx-charts-bar-vertical-2d>
        </mat-card>

        <mat-card class="chart-card">
            <h2>Expense Distribution</h2>
            <ngx-charts-pie-chart
                [view]="[700, 400]"
                [results]="pieChartData"
                [gradient]="true"
                [labels]="true"
                [scheme]="'cool'"
                [doughnut]="false"
            >
            </ngx-charts-pie-chart>
        </mat-card>
    </div>
</div>
